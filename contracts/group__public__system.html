<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="COOPENOMICS" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="Документация на смарт-контракты платформы Кооперативной Экономики на языке C/C++" />
<meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="COOPENOMICS" />
<meta name="twitter:description" content="Документация на смарт-контракты платформы Кооперативной Экономики на языке C/C++" />
<!-- END twitter metadata -->
<title>COOPENOMICS: Контракт SYSTEM</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="mermaid.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    if (window.mermaid) {
      try {
        // Initialize mermaid with auto theme based on current dark mode state
        const isDarkMode = document.documentElement.classList.contains('dark-mode');
        const theme = isDarkMode ? 'dark' : 'neutral';
        mermaid.initialize({
          startOnLoad: true,
          theme: theme,
          securityLevel: 'loose',
          fontFamily: 'arial',
          fontSize: 14
        });
        console.log('success mermaid init with theme:', theme);
      } catch (error) {
        console.warn('Mermaid initialization error:', error);
      }
    }
  });
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/coopenomics" class="github-corner" title="Смотреть исходники на GitHub">
    <svg viewBox="0 0 250 250" style="position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">COOPENOMICS
   &#160;<span id="projectnumber">v1</span>
   </div>
   <div id="projectbrief">Кооперативная Экономика</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Поиск','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__public__system.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Группы</a>  </div>
  <div class="headertitle"><div class="title">Контракт SYSTEM</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Группы</h2></td></tr>
<tr class="memitem:group__public__system__processes"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__system__processes.html">Процессы</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__public__system__actions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__system__actions.html">Действия</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__public__system__tables"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__system__tables.html">Таблицы</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__public__system__consts"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__system__consts.html">Константы</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>


<h3><a id="economic_model" name="economic_model"></a>Технико-экономическая модель</h3><div class="textblock"><h2><a class="anchor" id="autotoc_md377"></a>
Введение</h2>
<p >COOPOS - это блокчейн-платформа для кооперативов. Как и любая цифровая платформа, COOPOS нуждается в вычислительных ресурсах для работы. Каждый раз, когда пайщик регистрируется в системе или участвует в кооперативном контракте - всё это требует ресурсов. Эти ресурсы стоят денег, и кто-то должен за них платить.</p>
<p >Традиционные блокчейн-платформы решают эту проблему просто: каждый пользователь покупает ресурсы за свой счет и оплачивает комиссию за каждую транзакцию. Но для кооперативного движения такой подход неприемлем - он создает барьеры входа, когда каждому участнику необходимо понять что такое COOPOS, как это работает, как этим пользоваться, почему за это необходимо платить, кому, когда и как..</p>
<p >Именно поэтому была разработана уникальная технико-экономическая модель COOPOS, которая обеспечивает справедливое распределение затрат на ресурсы между всеми участниками системы и создает устойчивую основу для роста кооперативной экономики.</p>
<h2><a class="anchor" id="autotoc_md378"></a>
Фундаментальные основы системы</h2>
<h3><a class="anchor" id="autotoc_md379"></a>
Назначение и роль вычислительных ресурсов</h3>
<p >В основе любой блокчейн-платформы (да и вообще, IT-платформы) лежит необходимость использования вычислительных ресурсов для выполнения операций пользователей. Каждое действие в системе COOPOS, будь то создание аккаунта пайщика или его участие в кооперативном смарт-контракте требует наличия ресурсов всех трех типов:</p>
<ul>
<li><b>RAM (оперативная память)</b> - используется для постоянного хранения данных аккаунтов, состояния смарт-контрактов и всей информации, которая должна быть доступна в любой момент смарт-контрактов для их работы.</li>
<li><b>CPU (вычислительные ресурсы)</b> - необходимы для выполнения математических операций по ходу обработки логики смарт-контрактов.</li>
<li><b>NET (сетевые ресурсы)</b> - требуются для передачи данных между узлами сети и распространения информации о транзакциях.</li>
</ul>
<p >Эти ресурсы являются ограниченными и должны справедливо распределяться между всеми участниками системы, обеспечивая при этом стабильную работу сети.</p>
<h3><a class="anchor" id="autotoc_md380"></a>
Кооперативная модель использования ресурсов</h3>
<p >В системе COOPOS вычислительные ресурсы <b>не передаются пайщикам</b> безвозвратно. Вместо этого ресурсы остаются у кооператива, который совершает операции <b>ЗА пайщиков</b> в соответствии с кооперативной бизнес-логикой. Это означает, что пайщики не должны беспокоиться о покупке ресурсов, кооператив оптимально управляет распределением ресурсов, гарантируется справедливость и доступность для всех пайщиков.</p>
<h3><a class="anchor" id="autotoc_md381"></a>
COOPOS как ядро бизнес-логики кооперативов</h3>
<p >Блокчейн COOPOS представляет собой <b>ядро бизнес-логики кооперативов</b> на основе распределенной базы данных, которая наполняется информацией через действия в смарт-контрактах. Основными функциями являются обработка анонимизированных электронных документов, реализация кооперативной бизнес-логики и обеспечение надежности данных. Поверх этого ядра выстраиваются дополнительные сервисы: CRM для управления взаимоотношениями с пайщиками, аналитические системы, мобильные приложения и интеграции с внешними системами.</p>
<h2><a class="anchor" id="autotoc_md382"></a>
Система аренды ресурсов</h2>
<h3><a class="anchor" id="autotoc_md383"></a>
Принцип работы арендной системы</h3>
<p >Система аренды ресурсов в COOPOS построена на принципе временного делегирования вычислительных мощностей от общего пула ресурсов конкретным пользователям.</p>
<p ><b>Делегаты сети</b> - это люди или команды, которые:</p><ul>
<li>Владеют серверной инфраструктурой (физические серверы с RAM, CPU, интернет-каналами)</li>
<li>Поддерживают работу блокчейн-сети (производят блоки, валидируют транзакции)</li>
<li>Предоставляют свои вычислительные ресурсы в общий пул для аренды</li>
<li>Получают вознаграждение за свою деятельность</li>
</ul>
<p >Именно делегаты формируют общий пул ресурсов платформы, предоставляя их в аренду кооперативам на определенный срок за соответствующую плату.</p>
<h3><a class="anchor" id="autotoc_md384"></a>
Система квот: единица измерения ресурсов</h3>
<p >В системе COOPOS все вычислительные ресурсы измеряются в <b>квотах</b>. Одна квота представляет собой стандартизированный пакет ресурсов (RAM, CPU, NET), который кооператив может потратить в течение срока аренды.</p>
<p >Каждое действие в смарт-контракте уникально и содержит разное количество информации, которое требуется обработать, сохранить и передать. Из-за этой уникальности средняя стоимость каждой операции для кооперативов выявляется <b>эмпирическим путем</b> - через подсчет фактического использования ресурсов в квотах при выполнении реальных операций.</p>
<h3><a class="anchor" id="autotoc_md385"></a>
Квота как пакет ресурсов</h3>
<p >Одна квота - это пакет ресурсов, который включает определенное количество RAM для хранения данных, долю CPU для вычислительных операций и часть NET для передачи данных. Сколько конкретных операций позволит выполнить одна квота, зависит от типа выполняемых операций (простые переводы vs сложные смарт-контракты), объема обрабатываемых данных в каждой операции, количества RAM, которое потребуется смарт-контракту для постоянного хранения информации, и продолжительности хранения данных в оперативной памяти кооператива.</p>
<p >Ключевыми параметрами квот являются стоимость одной квоты в размере 5 AXON и минимальное обязательство каждого кооператива оплачивать минимум 1 квоту в день. Если кооперативу требуется больше ресурсов для действий своих пайщиков, он арендует дополнительные квоты кратно базовой стоимости.</p>
<p >Такая система обеспечивает предсказуемые расходы для кооперативов, справедливое распределение ресурсов между участниками сети, простоту планирования операционных затрат, защиту от внезапного дефицита ресурсов и точный учет фактического потребления ресурсов.</p>
<h2><a class="anchor" id="autotoc_md386"></a>
Уровни операций в системе COOPOS</h2>
<p >На уровне блокчейна все операции складываются из отдельных <b>действий</b> (actions) в смарт-контрактах. Каждое действие представляет собой атомарную операцию: запись данных, проверка условий, передача токенов и т.д.</p>
<p >На уровне управления кооперативом для администрации все складывается из <b>процессов</b> - завершенных логических операций с пайщиками, которые состоят из нескольких последовательных действий.</p>
<h3><a class="anchor" id="autotoc_md387"></a>
Пример: Регистрация нового пайщика</h3>
<p >Этот кооперативный процесс включает несколько действий блокчейна:</p><ol type="1">
<li><b>Прием заявления</b> - сохранение данных заявки в смарт-контракте</li>
<li><b>Прием вступительного взноса</b> - обработка финансовой транзакции</li>
<li><b>Прием минимального паевого взноса</b> - регистрация паевого капитала</li>
<li><b>Голосование на заседании совета</b> - фиксация решения в смарт-контракте</li>
<li><b>Исполнение решения совета</b> - активация аккаунта пайщика</li>
</ol>
<p >Все эти отдельные действия формируют <b>ОДИН пакет документов</b>, который создается и обрабатывается системой как единое целое.</p>
<h2><a class="anchor" id="autotoc_md388"></a>
Пакеты документов</h2>
<p >Пакет документов представляет собой завершенную последовательность связанных действий в смарт-контрактах, которая составляет логически целостную операцию с точки зрения кооперативного управления.</p>
<p >Важно понимать, что система смарт-контрактов оперирует реальными анонимизированными электронными документами, которые передаются ИЗВНЕ. Пакет документов - это реальный набор документов, прошедший обработку через кооперативную бизнес-логику.</p>
<p >Для удобства кооперативов вся система учета строится вокруг стоимости аренды квот за пакеты документов определенных типов, а не за отдельные действия. Это обеспечивает понятное планирование затрат и прозрачное финансовое управление.</p>
<h3><a class="anchor" id="autotoc_md389"></a>
Точный учет ресурсов на основе протокола блокчейна</h3>
<p >Важно понимать, что учет вычислительных ресурсов ведется <b>в точности на основании информации, которую предоставляет протокол блокчейна COOPOS</b> после исполнения каждой транзакции.</p>
<p >Сумма стоимости ресурсов при выполнении всех транзакций по процессу формирует итоговую стоимость ПАКЕТА документов, которая зависит от:</p>
<ul>
<li><b>Сложности обработки данных</b> в каждом действии процесса</li>
<li><b>Объема информации</b>, которую необходимо сохранить в RAM</li>
<li><b>Продолжительности хранения</b> данных в оперативной памяти кооператива</li>
<li><b>Необходимости ежедневной оплаты</b> минимальной квоты для поддержания доступности ресурсов</li>
</ul>
<p >Если кооператив не оплачивает минимальную ежедневную квоту, его ресурсы списываются в ноль, и пайщики теряют возможность совершать любые действия в системе.</p>
<p >На практике процесс аренды квот происходит автоматически. На уровне клиентского программного обеспечения (которое подключается к блокчейну) работает специальный сервис мониторинга. Этот сервис:</p>
<ol type="1">
<li><b>Постоянно отслеживает</b> состояние ресурсов всех аккаунтов кооператива в блокчейне</li>
<li><b>Анализирует использование</b> RAM, CPU и NET в режиме реального времени</li>
<li><b>Прогнозирует потребности</b> на основе текущей активности пайщиков</li>
<li><b>Автоматически вызывает</b> действие <a class="el" href="group__public__system__actions.html#gab3d6d9e77d6b9ac63b79e6d8104d8312">eosiosystem::system_contract::powerup</a> когда:<ul>
<li>Подходит время продления текущих квот</li>
<li>Текущих ресурсов становится недостаточно для активности кооператива</li>
<li>Возникает необходимость в дополнительных квотах</li>
</ul>
</li>
</ol>
<p >Благодаря такой автоматизации кооперативы не должны вручную отслеживать состояние ресурсов и беспокоиться о технических деталях их пополнения.</p>
<h3><a class="anchor" id="autotoc_md390"></a>
Процесс аренды квот через действие powerup</h3>
<p >Когда клиентский сервис или кооператив вручную совершает платеж за аренду квот через действие <a class="el" href="group__public__system__actions.html#gab3d6d9e77d6b9ac63b79e6d8104d8312">eosiosystem::system_contract::powerup</a>, происходит следующий процесс:</p>
<ol type="1">
<li><b>Разделение платежа</b>: Поступивший платеж автоматически распределяется между тремя типами ресурсов в фиксированных пропорциях:<ul>
<li>50% направляется на аренду RAM</li>
<li>25% выделяется для CPU ресурсов</li>
<li>25% резервируется для NET ресурсов</li>
</ul>
</li>
<li><b>Передача ресурсов</b>: Соответствующее количество ресурсов немедленно передается получателю (аккаунту пайщика) на указанный срок аренды</li>
<li><b>Создание арендного обязательства</b>: В системе создается запись о временном характере предоставленных квот с указанием точного времени их возврата (обычно через 24 часа)</li>
<li><b>Распределение вознаграждения</b>: Делегаты сети получают свою долю от платежа в качестве вознаграждения за предоставление ресурсов</li>
</ol>
<h3><a class="anchor" id="autotoc_md391"></a>
Минимальные обязательства кооперативов</h3>
<p >Для обеспечения стабильности системы и гарантии доступа пайщиков к базовым функциям платформы, каждый кооператив обязан вносить минимальную ежемесячную плату за аренду ресурсов. Эта сумма определяется параметром <code>min_powerup_fee</code> и покрывает базовые потребности в вычислительных ресурсах для поддержания активности аккаунтов пайщиков.</p>
<p >Минимальная плата обеспечивает:</p><ul>
<li>Гарантированный доступ к основным функциям платформы для всех пайщиков</li>
<li>Стабильный доход делегатов сети</li>
<li>Предсказуемость операционных расходов для кооперативов</li>
<li>Защиту от чрезмерной волатильности в использовании ресурсов</li>
</ul>
<h3><a class="anchor" id="autotoc_md392"></a>
Механизм возврата ресурсов</h3>
<p >Уникальной особенностью системы COOPOS является способность точно отслеживать и возвращать арендованные ресурсы по истечении срока аренды. Это стало возможным благодаря внедрению механизма контроля использования RAM в реальном времени, который позволяет системе знать точное количество ресурсов, фактически используемых каждым аккаунтом в любой момент времени.</p>
<p >Процесс возврата ресурсов выполняется действием <a class="el" href="group__public__system__actions.html#gaa573d628b237c167aa99fc71cb150736">eosiosystem::system_contract::powerupexec</a> и включает:</p>
<ol type="1">
<li><b>Проверка истекших обязательств</b>: Система сканирует все активные договоры аренды и выявляет те, срок которых истек</li>
<li><b>Расчет возвращаемых ресурсов</b>: Для каждого истекшего договора определяется точное количество ресурсов, подлежащих возврату</li>
<li><b>Обработка долговых обязательств</b>: Если аккаунт использует больше RAM, чем позволяет новый лимит после возврата, формируется цифровое долговое обязательство</li>
<li><b>Физический возврат ресурсов</b>: Ресурсы возвращаются в общий пул делегатов для последующего предоставления в аренду</li>
</ol>
<h2><a class="anchor" id="autotoc_md393"></a>
Специальные механизмы предоставления ресурсов</h2>
<h3><a class="anchor" id="autotoc_md394"></a>
Регистрация новых пайщиков</h3>
<p >При регистрации нового пайщика в системе применяется особый механизм предоставления ресурсов, отличающийся от стандартной аренды. Часть ресурсов, необходимых для функционирования базового аккаунта, передается новому пайщику на бессрочной основе в качестве «стартового капитала».</p>
<p >Этот механизм реализуется через параметр <code>transfer = true</code> в действии <code>powerup</code> и обеспечивает:</p>
<ul>
<li>Гарантированный доступ к базовым функциям платформы для всех новых пайщиков</li>
<li>Отсутствие необходимости в постоянных доплатах за минимальные операции</li>
<li>Снижение барьеров входа в кооперативную экосистему</li>
<li>Устойчивость аккаунтов к временным финансовым затруднениям</li>
</ul>
<h3><a class="anchor" id="autotoc_md395"></a>
Автоматическое продление аренды</h3>
<p >Для активно используемых ресурсов система предусматривает механизм автоматического продления аренды. Если ресурсы фактически используются и кооператив регулярно вносит платежи, аренда автоматически пролонгируется на следующий период, обеспечивая непрерывность работы без необходимости ручного вмешательства.</p>
<p >Такой подход гарантирует:</p><ul>
<li>Бесперебойную работу активных аккаунтов</li>
<li>Отсутствие простоев из-за технических проблем с продлением аренды</li>
<li>Оптимальное использование доступных ресурсов</li>
<li>Снижение административной нагрузки на кооперативы</li>
</ul>
<h2><a class="anchor" id="autotoc_md396"></a>
Система управления долгами по ресурсам</h2>
<h3><a class="anchor" id="autotoc_md397"></a>
Природа долговых обязательств</h3>
<p >В процессе работы с арендованными ресурсами могут возникать ситуации, когда аккаунт использует больше RAM, чем ему будет доступно после истечения аренды. Это происходит, например, когда пайщик активно участвует в смарт-контрактах, создает много записей или хранит большие объемы данных.</p>
<p >Система COOPOS решает эту проблему через механизм долговых обязательств, который позволяет временно "занимать" ресурсы с последующим их возмещением при следующих платежах за аренду.</p>
<h3><a class="anchor" id="autotoc_md398"></a>
Техническая реализация долговой системы</h3>
<p >Управление долгами реализуется через специальную таблицу <a class="el" href="namespaceeosiosystem.html#a52ceb5dd9d2a80698c83a32fb4b3e62f">eosiosystem::ram_debts_table</a> и функцию <a class="el" href="classeosiosystem_1_1system__contract.html#a04a864fd31b03ca4e7ce3a9fd65476c7">eosiosystem::system_contract::update_ram_debt_table</a>. Когда система обнаруживает превышение лимитов RAM при возврате ресурсов, происходит следующее:</p>
<ol type="1">
<li><b>Расчет долга</b>: Определяется точная сумма "избыточного" использования RAM</li>
<li><b>Создание записи</b>: Долг фиксируется как отрицательное значение в таблице</li>
<li><b>Корректировка лимитов</b>: Лимит RAM устанавливается равным текущему использованию, фактически обнуляя доступную квоту</li>
<li><b>Автоматическое погашение</b>: При следующей аренде ресурсов долг автоматически вычитается из новых ресурсов</li>
</ol>
<p >Этот механизм обеспечивает:</p><ul>
<li>Невозможность "потери" данных из-за недостатка ресурсов</li>
<li>Справедливое распределение затрат на фактически используемые ресурсы</li>
<li>Автоматическое восстановление баланса без ручного вмешательства</li>
<li>Защиту от злоупотреблений системой аренды</li>
</ul>
<h2><a class="anchor" id="autotoc_md399"></a>
Математическая модель эмиссии токенов</h2>
<h3><a class="anchor" id="autotoc_md400"></a>
Философия эмиссионной политики</h3>
<p >Эмиссионная политика COOPOS основана на принципе <b>"эмиссии роста"</b> - дополнительные токены выпускаются только тогда, когда система действительно расширяется и увеличивается спрос на ее услуги. Такой подход обеспечивает естественную связь между денежной массой и реальной экономической активностью.</p>
<p >Математической основой эмиссии служит золотое сечение <b>φ = 1.618</b>, отражающее естественные пропорции роста, наблюдаемые в природе и устойчивых экономических системах. Использование этой константы обеспечивает гармоничное и предсказуемое развитие денежной массы.</p>
<h3><a class="anchor" id="autotoc_md401"></a>
Формула эмиссии</h3>
<p >Система использует единую формулу для расчета дополнительной эмиссии:</p>
<div class="fragment"><div class="line">new_emission = (1 + emission_factor) tact_fees - current_supply</div>
</div><!-- fragment --><p >где:</p><ul>
<li><code>emission_factor</code> = 0.618 (обратное значение золотого сечения)</li>
<li><code>tact_fees</code> - общая сумма комиссий, собранных за текущий такт</li>
<li><code>current_supply</code> - текущее предложение токенов в системе</li>
</ul>
<p >Эта формула реализует принцип: "новая эмиссия создается только тогда, когда
экономическая активность (измеряемая через комиссии) превышает определенный
порог относительно существующей денежной массы".</p>
<h3><a class="anchor" id="autotoc_md402"></a>
Условия активации эмиссии</h3>
<p >Эмиссия происходит не постоянно, а только при выполнении определенного условия:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (state.tact_fees &gt; state.emission_start)</div>
</div><!-- fragment --><p >где <code>emission_start</code> представляет собой динамически пересчитываемый порог:</p>
<div class="fragment"><div class="line">emission_start = current_supply / (1 + emission_factor)</div>
</div><!-- fragment --><p >Это означает, что эмиссия активируется только когда комиссии за такт превышают примерно 61.8% от текущего объема то</p>
<h2><a class="anchor" id="autotoc_md403"></a>
Математическая модель эмиссии</h2>
<h3><a class="anchor" id="autotoc_md404"></a>
Формула золотого сечения</h3>
<p >Эмиссия основана на золотом сечении φ = 1.618, которое отражает естественные пропорции роста:</p>
<p >Основная формула эмиссии:** </p><div class="fragment"><div class="line">ΔVi = Qi × 0.618 - (V - Qi)</div>
</div><!-- fragment --><p> где:</p><ul>
<li>ΔVi - количество дополнительно выпускаемых токенов на такт i</li>
<li>Qi - комиссии, собранные за такт (платежи за ресурсы)</li>
<li>V - общий объем токенов в обращении</li>
<li><p class="startli">(V - Qi) - объем токенов в накоплениях</p>
<p class="startli">Формула в коде:**</p>
</li>
</ul>
<div class="fragment"><div class="line">new_emission = (1 + emission_factor) × tact_fees - current_supply</div>
</div><!-- fragment --><p> где emission_factor = 0.618</p>
<h3><a class="anchor" id="autotoc_md405"></a>
Условие активации эмиссии</h3>
<p >Эмиссия активируется только при превышении порога расширения системы:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (state.tact_fees &gt; state.emission_start)</div>
</div><!-- fragment --><p >Порог emission_start рассчитывается как:</p>
<div class="fragment"><div class="line">emission_start = current_supply / (1 + emission_factor)</div>
</div><!-- fragment --><p >Это означает, что эмиссия происходит только когда система активно растет и комиссии за такт превышают ~61.8% от текущего предложения токенов.</p>
<h2><a class="anchor" id="autotoc_md406"></a>
Распределение доходов</h2>
<h3><a class="anchor" id="autotoc_md407"></a>
Текущая схема распределения</h3>
<p >Каждый платеж за аренду ресурсов распределяется между:</p><ul>
<li><b>90% делегатам</b>(producers_percent) - за валидацию блоков</li>
<li><b>10% на счёт системных членских взносов</b>(fund_percent) - для последующего распределения среди пайщиков через <a class="el" href="group__public__capital.html">Контракт CAPITAL</a> после покрытия операционных расходов системы</li>
</ul>
<h3><a class="anchor" id="autotoc_md408"></a>
Дополнительная эмиссия</h3>
<p >При активации эмиссии все дополнительные токены поступают на счёт системных членских взносов:</p>
<div class="fragment"><div class="line">@ref <a class="code hl_function" href="group__public__system__actions.html#ga7e80c965d15f6613db3ee04188d68af5">eosiosystem::system_contract::emit</a> (new_emission); <span class="comment">// Эмиссия на счёт системных членских взносов</span></div>
<div class="ttc" id="agroup__public__system__actions_html_ga7e80c965d15f6613db3ee04188d68af5"><div class="ttname"><a href="group__public__system__actions.html#ga7e80c965d15f6613db3ee04188d68af5">eosiosystem::system_contract::emit</a></div><div class="ttdeci">void emit(eosio::asset new_emission)</div><div class="ttdoc">Выпускает новые токены в фонд. Выпускает указанное количество новых токенов и передает их в сберегате...</div><div class="ttdef"><b>Definition:</b> producer_pay.cpp:101</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md409"></a>
Экономические фазы системы</h2>
<h3><a class="anchor" id="autotoc_md410"></a>
Фаза расширения (такты 1-20)</h3>
<p >В этой фазе происходит активный рост сети:</p><ul>
<li>Комиссии превышают порог emission_start</li>
<li>Активная эмиссия дополнительных токенов</li>
<li>Счёт системных членских взносов получает как 10% от стоимости оплаченных квот вычислительных ресурсов, так и всю эмиссию для последующего распределения среди пайщиков через <a class="el" href="group__public__capital.html">Контракт CAPITAL</a></li>
<li><p class="startli">Делегаты получают 90% от стоимости оплаченных квот вычислительных ресурсов.</p>
<p class="startli">Пример последовательного расчета для первых трех тактов:**</p>
</li>
</ul>
<p ><b>Такт 1:</b></p><ul>
<li>Начальный запас токенов: 10,000 рублей (1000 AXON)</li>
<li>Стоимость квот за такт: 10,000 рублей (1000 AXON)</li>
<li>Порог эмиссии: 10,000 / 1.618 = 6,180 рублей</li>
<li>10,000 &gt; 6,180 ✓ → эмиссия активна</li>
<li>Эмиссия: 1.618 × 10,000 - 10,000 = 6,180 рублей (618 AXON)</li>
<li>Новый запас: 10,000 + 6,180 = 16,180 рублей</li>
<li>Делегатам: 10,000 × 0.9 = 9,000 рублей</li>
<li>Системные взносы за такт: 10,000 × 0.1 + 6,180 = 7,180 рублей</li>
</ul>
<p ><b>Такт 2:</b></p><ul>
<li>Текущий запас: 16,180 рублей (1618 AXON)</li>
<li>Стоимость квот за такт: 16,180 рублей</li>
<li>Порог эмиссии: 16,180 / 1.618 = 10,000 рублей</li>
<li>16,180 &gt; 10,000 ✓ → эмиссия активна</li>
<li>Эмиссия: 1.618 × 16,180 - 16,180 = 10,000 рублей (1000 AXON)</li>
<li>Новый запас: 16,180 + 10,000 = 26,180 рублей</li>
<li>Делегатам: 16,180 × 0.9 = 14,562 рубля</li>
<li>Системные взносы за такт: 16,180 × 0.1 + 10,000 = 11,618 рублей</li>
<li>Накопленные системные взносы: 7,180 + 11,618 = 18,798 рублей</li>
</ul>
<p ><b>Такт 3:</b></p><ul>
<li>Текущий запас: 26,180 рублей (2618 AXON)</li>
<li>Стоимость квот за такт: 26,180 рублей</li>
<li>Порог эмиссии: 26,180 / 1.618 = 16,180 рублей</li>
<li>26,180 &gt; 16,180 ✓ → эмиссия активна</li>
<li>Эмиссия: 1.618 × 26,180 - 26,180 = 16,180 рублей (1618 AXON)</li>
<li>Новый запас: 26,180 + 16,180 = 42,360 рублей</li>
<li>Делегатам: 26,180 × 0.9 = 23,562 рубля</li>
<li>Системные взносы за такт: 26,180 × 0.1 + 16,180 = 18,798 рублей</li>
<li>Накопленные системные взносы: 18,798 + 18,798 = 37,596 рублей</li>
</ul>
<h3><a class="anchor" id="autotoc_md411"></a>
Фаза стабилизации (такты 21+)</h3>
<p >Когда система достигает максимального объема вычислительного облака (83,886,080 рублей):</p><ul>
<li>Эмиссия прекращается (комиссии не превышают emission_start)</li>
<li>Счёт системных членских взносов получает только 10% от стоимости квот (эмиссия прекращается)</li>
<li>Делегаты продолжают получать 90% от стоимости квот</li>
<li>Денежная масса стабилизируется</li>
</ul>
<h2><a class="anchor" id="autotoc_md412"></a>
Техническая реализация</h2>
<h3><a class="anchor" id="autotoc_md413"></a>
Ключевые действия (actions)</h3>
<h4><a class="anchor" id="autotoc_md414"></a>
Конфигурация системы аренды ресурсов</h4>
<p >Действие <a class="el" href="group__public__system__actions.html#gae71212071f747832a2a56eb4868d9c81">eosiosystem::system_contract::cfgpowerup</a> конфигурирует систему аренды ресурсов:</p><ul>
<li>Устанавливает срок аренды (powerup_days)</li>
<li>Определяет минимальную комиссию (min_powerup_fee)</li>
<li>Инициализирует веса ресурсов на основе текущего предложения токенов</li>
</ul>
<h4><a class="anchor" id="autotoc_md415"></a>
Аренда ресурсов</h4>
<p >Основное действие <a class="el" href="group__public__system__actions.html#gab3d6d9e77d6b9ac63b79e6d8104d8312">eosiosystem::system_contract::powerup</a> для аренды ресурсов:</p><ul>
<li>Распределяет платеж: 50% RAM, 25% CPU, 25% NET</li>
<li>Обрабатывает долги по RAM через update_ram_debt_table()</li>
<li>Создает заказ аренды с временем истечения</li>
<li>Вызывает <a class="el" href="classeosiosystem_1_1system__contract.html#a682be09e4bcb430df8e2ce98f1912563">eosiosystem::system_contract::fill_tact</a> для обработки эмиссии</li>
</ul>
<h4><a class="anchor" id="autotoc_md416"></a>
Обработка истекших заказов аренды</h4>
<p >Действие <a class="el" href="group__public__system__actions.html#gaa573d628b237c167aa99fc71cb150736">eosiosystem::system_contract::powerupexec</a> обрабатывает истекшие заказы аренды:</p><ul>
<li>Возвращает ресурсы от аккаунтов в резерв eosio.power</li>
<li>Обновляет utilization в состоянии ресурсов</li>
<li>Может формировать долги по RAM при недостатке свободной памяти</li>
</ul>
<h4><a class="anchor" id="autotoc_md417"></a>
Инициализация системы эмиссии</h4>
<p >Действие <a class="el" href="classeosiosystem_1_1system__contract.html#af6ed697e2d198ca5bce29cbacb682490">eosiosystem::system_contract::initemission</a> инициализирует систему эмиссии:</p><ul>
<li>Устанавливает начальное предложение (обычно 1000 токенов)</li>
<li>Определяет продолжительность такта (регулируемый параметр)</li>
<li>Фиксирует фактор эмиссии (0.618 - золотое сечение)</li>
</ul>
<h3><a class="anchor" id="autotoc_md418"></a>
Состояние системы</h3>
<h4><a class="anchor" id="autotoc_md419"></a>
Состояние рынка ресурсов</h4>
<p >Таблица <a class="el" href="structeosiosystem_1_1powerup__state.html">eosiosystem::powerup_state</a> хранит состояние рынка ресурсов:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>powerup_state {</div>
<div class="line">  powerup_state_resource net;   <span class="comment">// Состояние NET ресурсов</span></div>
<div class="line">  powerup_state_resource cpu;   <span class="comment">// Состояние CPU ресурсов</span></div>
<div class="line">  powerup_state_resource ram;   <span class="comment">// Состояние RAM ресурсов</span></div>
<div class="line">  uint32_t powerup_days;        <span class="comment">// Срок аренды</span></div>
<div class="line">  asset min_powerup_fee;        <span class="comment">// Минимальная комиссия</span></div>
<div class="line">};</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md420"></a>
Управление эмиссией</h4>
<p >Таблица <a class="el" href="structeosiosystem_1_1emission__state.html">eosiosystem::emission_state</a> управляет процессом эмиссии:</p><ul>
<li>tact_number: номер текущего такта</li>
<li>tact_duration: продолжительность такта в секундах</li>
<li>emission_factor: коэффициент эмиссии (0.618)</li>
<li>current_supply: текущее предложение токенов</li>
<li>tact_fees: комиссии, собранные за текущий такт</li>
<li>emission_start: порог активации эмиссии</li>
</ul>
<h2><a class="anchor" id="autotoc_md421"></a>
Экономические показатели системы</h2>
<h3><a class="anchor" id="autotoc_md422"></a>
Базовые параметры</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Параметр   </th><th class="markdownTableHeadNone">Значение   </th><th class="markdownTableHeadNone">Описание    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Объем вычислительного облака   </td><td class="markdownTableBodyNone">64 GB   </td><td class="markdownTableBodyNone">Базовая емкость сети    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Стоимость аккаунта   </td><td class="markdownTableBodyNone">10 рублей   </td><td class="markdownTableBodyNone">Стоимость регистрация пайщика    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Стоимость пакета документов   </td><td class="markdownTableBodyNone">10 рублей   </td><td class="markdownTableBodyNone">Средняя стоимость пакета документов по любому процессу    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Генезис токенов   </td><td class="markdownTableBodyNone">10,000 рублей   </td><td class="markdownTableBodyNone">Начальная эмиссия    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Фактор эмиссии   </td><td class="markdownTableBodyNone">61.8%   </td><td class="markdownTableBodyNone">Основан на золотом сечении   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md423"></a>
Прогноз роста системы</h3>
<p >Основываясь на математической модели, система растёт следующим образом:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Такт   </th><th class="markdownTableHeadNone">Эмиссия (RUB)   </th><th class="markdownTableHeadNone">Всего токенов (RUB)   </th><th class="markdownTableHeadNone">Стоимость квот (RUB)   </th><th class="markdownTableHeadNone">Системные членские взносы (накопл., RUB)   </th><th class="markdownTableHeadNone">Делегаты (накопл., RUB)    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">6,180   </td><td class="markdownTableBodyNone">16,180   </td><td class="markdownTableBodyNone">10,000   </td><td class="markdownTableBodyNone">7,180   </td><td class="markdownTableBodyNone">9,000    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">10,000   </td><td class="markdownTableBodyNone">26,180   </td><td class="markdownTableBodyNone">16,180   </td><td class="markdownTableBodyNone">18,798   </td><td class="markdownTableBodyNone">23,562    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">16,180   </td><td class="markdownTableBodyNone">42,360   </td><td class="markdownTableBodyNone">26,180   </td><td class="markdownTableBodyNone">37,596   </td><td class="markdownTableBodyNone">47,124    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">26,180   </td><td class="markdownTableBodyNone">68,540   </td><td class="markdownTableBodyNone">42,360   </td><td class="markdownTableBodyNone">63,854   </td><td class="markdownTableBodyNone">85,378    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">42,360   </td><td class="markdownTableBodyNone">110,900   </td><td class="markdownTableBodyNone">68,540   </td><td class="markdownTableBodyNone">106,690   </td><td class="markdownTableBodyNone">147,064    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">20   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">83,886,080   </td><td class="markdownTableBodyNone">51,856,720   </td><td class="markdownTableBodyNone">89,041,748   </td><td class="markdownTableBodyNone">466,710,480    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">21+   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">83,886,080   </td><td class="markdownTableBodyNone">51,856,720   </td><td class="markdownTableBodyNone">94,227,420   </td><td class="markdownTableBodyNone">933,420,960   </td></tr>
</table>
<p ><b>Примечание:</b> Цифры приведены в рублях по курсу 1 AXON = 10 RUB. Системные членские взносы включают 10% от стоимости аренды всех квот плюс всю эмиссию для последующего распределения среди пайщиков через контракт CAPITAL. После такта 20 эмиссия прекращается, так как система достигает стабилизации. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Создано системой <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
     toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
     toggleButton.title = "Toggle Light/Dark Mode"
     $(document).ready(function(){
       document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
     })
     $(window).resize(function(){
       document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
     })
   })
</script>
</body>
</html>
